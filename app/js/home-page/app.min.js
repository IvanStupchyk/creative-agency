
/*fix header*/
let header = document.querySelector('.header');
if(header) {
  window.onscroll = function(){
    if(document.documentElement.scrollTop > 590){
      header.classList.add("header-fixed");
    }
    else{
      header.classList.remove("header-fixed");
    }
  }
}

$("#menu-desktop").on("click","a", function (event) {
  event.preventDefault();
    let id  = $(this).attr('href'),
        top = $(id).offset().top - 100 + 'px';
    $('body,html').animate({scrollTop: top}, 900);
});


$("#menu-mob").on("click", "a", function (event) {
  event.preventDefault();
  let id  = $(this).attr('href'),
      top = $(id).offset().top + 1 + 'px';
  $('body,html').animate({scrollTop: top}, 900);
});

/*mobile menu*/

let menuBtn = document.querySelector('.menu-btn');
let menuLines = document.querySelector('.menu-btn-lines');
let menuMobBox = document.querySelector('.menu-box');
let menuItem = document.querySelectorAll('.menu-item');

if(menuBtn) {
  menuBtn.addEventListener('click', function() {
    menuLines.classList.toggle("menu-btn-active");
    menuMobBox.classList.toggle("menu-show");
  });
}

menuItem.forEach(function(btn) {
  btn.addEventListener('click', function() {
    menuLines.classList.remove("menu-btn-active");
    menuMobBox.classList.remove("menu-show");
  });
});






// get tab container
var container = document.getElementById("tabContainer");
var tabcon = document.getElementById("tabscontent");
// set current tab
var navitem = document.getElementById("tabHeader_1");

//store which tab we are on
var ident = navitem.id.split("_")[1];
//alert(ident);
navitem.parentNode.setAttribute("data-current",ident);
//set current tab with class of activetabheader
navitem.setAttribute("class","tabActiveHeader");

//hide two tab contents we don't need

var pages = tabcon.getElementsByClassName("tabpage");
    for (var i = 0; i < pages.length; i++) {
        var comp=i+1;
        if(ident!=comp) {
            pages.item(i).style.display = "none";
        }
};

//this adds click event to tabs
var tabs = container.getElementsByTagName("li");
    for (var i = 0; i < tabs.length; i++) {
        tabs[i].onclick=displayPage;
}


// on click of one of tabs
function displayPage() {
    var current = this.parentNode.getAttribute("data-current");
    //remove class of activetabheader and hide old contents
    document.getElementById("tabHeader_" + current).removeAttribute("class");
    document.getElementById("tabpage_" + current).style.display="none";

    var ident = this.id.split("_")[1];

    //add class of activetabheader to new active tab and show contents
    this.setAttribute("class","tabActiveHeader");
    document.getElementById("tabpage_" + ident).style.display="block";
    this.parentNode.setAttribute("data-current",ident);
}



// video
let video = document.getElementById('video');
let buttonPlayMain = document.querySelector('.btn-play-main');
let btnPlayPause = document.getElementById('play-pause');
let stopBtn = document.getElementById('stop');
let muteBtn = document.getElementById('mute');
let progress = document.getElementById('progress');

let controlsContainer = document.querySelector('.controls');

if(buttonPlayMain) {
  buttonPlayMain.addEventListener('click', function () {
    if(video.paused) {
      video.play();
      buttonPlayMain.classList.add('button-main-hidden');
      btnPlayPause.classList.add('pause');
      controlsContainer.classList.add('show-container');
    }
  });
}

if(btnPlayPause) {
  btnPlayPause.addEventListener('click', function() {
    if(video.paused) {
      btnPlayPause.classList.remove('play');
      btnPlayPause.classList.add('pause');
      buttonPlayMain.classList.add('button-main-hidden');
      video.play();
    } else {
      btnPlayPause.classList.remove('pause');
      btnPlayPause.classList.add('play');
      buttonPlayMain.classList.remove('button-main-hidden');
      video.pause();
    }
  });
}

if(stopBtn) {
  stopBtn.addEventListener('click', function() {
    video.pause();
    video.currentTime = 0;
    buttonPlayMain.classList.remove('button-main-hidden');
    btnPlayPause.classList.remove('pause');
  });
}

if(muteBtn) {
  muteBtn.addEventListener('click', function () {
    if (video.muted == false) {
        muteBtn.classList.remove('mute-on');
        muteBtn.classList.add('mute-off');
        video.muted = true;
    } else {
      muteBtn.classList.remove('mute-off');
      muteBtn.classList.add('mute-on');
      video.muted = false;
    }
  });
}

if(video) {
  video.ontimeupdate = progressUpdate;
}

if(progress) {
  progress.onclick = videoRewind;
}

function progressUpdate() {
  console.log(video.duration);
  console.log(video.currentTime);
  let d = video.duration;
  let c = video.currentTime;
  progress.value = c / d * 100;
}

function videoRewind() {
  let w = this.offsetWidth;
  let o = event.offsetX;
  console.log(w);
  console.log(o);
  this.value = o / w * 100;
  video.pause();
  video.currentTime = video.duration * (o / w);
  video.play();
}


// let previewContainer = document.querySelector('.btn-container')
// let ShowImage = document.querySelector('.show-image');
// let HideImage = document.querySelector('.hide-image');
// let allImage = document.getElementById('all');
// let mobileAppImage = document.getElementById('mobile-app');
// let brandingImage = document.getElementById('branding');
// let checkImage = document.getElementById('check');

// let checkImage = document.

// previewContainer.addEventListener('click', function (event){
//   if(!event.target.closest('button')) return;
//   if(mobileAppImage === "mobile-app") {
//     mobileAppImage.classList.add('.show-image')
//   } 



// console.log(event.target);
// })


filterSelection("all") 
function filterSelection(c) {
  var x, i;
  x = document.getElementsByClassName("sorting-pictures-column");
  if (c == "all") c = "";
  for (i = 0; i < x.length; i++) {
    w3RemoveClass(x[i], "show");
    if (x[i].className.indexOf(c) > -1) w3AddClass(x[i], "show");
  }
}

// Show filtered elements
function w3AddClass(element, name) {
  var i, arr1, arr2;
  arr1 = element.className.split(" ");
  arr2 = name.split(" ");
  for (i = 0; i < arr2.length; i++) {
    if (arr1.indexOf(arr2[i]) == -1) {
      element.className += " " + arr2[i];
    }
  }
}

// Hide elements that are not selected
function w3RemoveClass(element, name) {
  var i, arr1, arr2;
  arr1 = element.className.split(" ");
  arr2 = name.split(" ");
  for (i = 0; i < arr2.length; i++) {
    while (arr1.indexOf(arr2[i]) > -1) {
      arr1.splice(arr1.indexOf(arr2[i]), 1);
    }
  }
  element.className = arr1.join(" ");
}

// Add active class to the current button (highlight it)
var btnContainer = document.getElementById("myBtnContainer");
var btns = btnContainer.getElementsByClassName("btn");
for (var i = 0; i < btns.length; i++) {
  btns[i].addEventListener("click", function(){
    var current = document.getElementsByClassName("active");
    current[0].className = current[0].className.replace(" active", "");
    this.className += " active";
  });
}


